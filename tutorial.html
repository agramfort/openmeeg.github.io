

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Context</title>
    
    <link rel="stylesheet" href="_static/navy.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="None" href="index.html" />
    <link rel="prev" title="License" href="license.html" /> 
  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; min-height:150px">
    <div style='float:left; display:inline-block'>
        <a href="index.html"><img src="_static/logo.png" border="0" alt="openmeeg"/></a>
    </div>
    <div id="title" style="display:inline-block">
        OpenMEEG
         <br/>
        A C++ package for low-frequency bio-electromagnetism <br/>
        solving forward problems in the field of EEG and MEG
    </div>
    <div style="float:right; display:inline-block">
        <a href="http://www.inria.fr"><img src="_static/inria.png" width="200px" border="0" alt="INRIA"/></a>
    </div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="license.html" title="License"
             accesskey="P">previous</a></li>
        <li><a href="index.html">Home</a>&nbsp;|&nbsp;</li>
        <li><a href="why_openmeeg.html">Why OpenMEEG?</a>&nbsp;|&nbsp;</li>
        <li><a href="#">Tutorial</a>&nbsp;|&nbsp;</li>
        <li><a href="http://openmeeg.gforge.inria.fr/download/">Download</a>&nbsp;|&nbsp;</li>
        <li><a href="https://github.com/openmeeg/openmeeg/">Source code</a>&nbsp;|&nbsp;</li>
        <li><a href="license.html">License</a>&nbsp;|&nbsp;</li>
        <li><a href="publications.html">Publications</a>&nbsp;|&nbsp;</li>
        <li><a href="compile.html">Compilation</a>&nbsp;|&nbsp;</li>
        <li><a href="contact.html">Contact us</a>&nbsp;|&nbsp;</li>
        <!-- <li><a href="search.html">Search</a></li> -->
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Context</a></li>
<li><a class="reference internal" href="#data">Data</a></li>
<li><a class="reference internal" href="#commands">Commands</a><ul>
<li><a class="reference internal" href="#head-matrix-assembly">Head Matrix assembly <img class="math" src="_images/math/da985019c5b54f24658995a8ec24f1f9ba49d05c.png" alt="\mathbf{HeadMat}"/>:</a></li>
<li><a class="reference internal" href="#source-matrix-assembly">Source matrix assembly <img class="math" src="_images/math/6d87db81b951c06a05650595ddb8083ef3c5846b.png" alt="\mathbf{Source}"/>:</a></li>
<li><a class="reference internal" href="#matrix-inversion"><img class="math" src="_images/math/da985019c5b54f24658995a8ec24f1f9ba49d05c.png" alt="\mathbf{HeadMat}"/> matrix inversion:</a></li>
<li><a class="reference internal" href="#linear-transformation-from-x-to-the-sensor-potential">Linear transformation from X to the sensor potential:</a></li>
<li><a class="reference internal" href="#gain-matrix-computation">Gain matrix computation:</a></li>
<li><a class="reference internal" href="#the-forward-problem">The forward problem:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-format">Data format</a><ul>
<li><a class="reference internal" href="#geometry-description-file">Geometry description file</a></li>
<li><a class="reference internal" href="#conductivity-description-file">Conductivity description file</a></li>
<li><a class="reference internal" href="#source-description">Source description</a><ul>
<li><a class="reference internal" href="#source-position-and-orientation">Source position and orientation</a><ul>
<li><a class="reference internal" href="#isolated-dipoles">Isolated dipoles</a></li>
<li><a class="reference internal" href="#distributed-dipoles">Distributed dipoles</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source-activation">Source activation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sensor-definition">Sensor definition</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="license.html"
                        title="previous chapter">License</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="context">
<h1>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h1>
<img alt="_images/surf3.png" src="_images/surf3.png" style="width: 400px;" />
<p>The forward problem consists in simulating the electric potential (EEG)
and magnetic fields (MEG) on the sensors due to electrical sources
within the brain.</p>
<img alt="_images/dipole.png" src="_images/dipole.png" style="width: 400px;" />
<p>The potential is computed on <strong>all surfaces</strong> of the head model
(scalp, outer skull and inner skull for a three-layer model). Let
<img class="math" src="_images/math/5ecbbc0083da71f2cbc69e1377535094685b108a.png" alt="\mathbf{X}"/> contain the values of the potential on the
discretized surfaces, as well as the values of the normal current. The
Boundary Element Method leads to a linear system:</p>
<div class="math">
<p><img src="_images/math/f0376852a9e2a355a1bc912997db8ed5abedbfeb.png" alt="\mathbf{HeadMat} . \mathbf{X} = \mathbf{SourceMat}"/></p>
</div><p>See sections <a class="reference internal" href="#command-assemble-headmat"><em>Head Matrix assembly :</em></a>, <a class="reference internal" href="#command-assemble-sourcemat"><em>Source matrix assembly :</em></a>
and <a class="reference internal" href="#command-invert-headmat"><em> matrix inversion:</em></a>.</p>
<p>The matrices relating the head model surfaces and the sensor data
must be computed. These are different for EEG and for MEG.
For EEG, the potential is interpolated from the surface discretization
points to the sensor positions through a simple linear transformation:</p>
<div class="math">
<p><img src="_images/math/9fde6bb141ff7c319fca5e128ca21c009217cd0e.png" alt="\left[ potential at sensors \right] =
    \left[ interpolation matrix \right] \times \left[ potential at interfaces \right] in the case of EEG."/></p>
</div><p>For MEG, the Biot and Savart equation allows to identify two
contributions to the magnetic field: one which comes directly from the
sources, and an ohmic contribution which comes from the volume
conductor. Hence two linear transformations must be computed, one from
the source locations to MEG sensors, the other from the head model
interfaces to the MEG sensors.</p>
<p>See section [sect: command assemble sensors].</p>
<p>&nbsp;: the matrix relating the sources (at fixed positions and orientations)
to the sensors is now ready to be computed (section [sect: command
gain]). This matrix is called the <strong>gain matrix</strong> and is denoted
<img class="math" src="_images/math/597c852cd8d4be79f01a80b6317d2096dd10c544.png" alt="\mathbf{G}"/>. The gain matrix is then applied to the source
activation to simulate the forward problem (section [sect: command
direct]).</p>
</div>
<div class="section" id="data">
<h1>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes the type of data that is required to run a
forward problem with OpenMEEG. More detail on the data format is
provided in Appendix&nbsp;[chap:format].</p>
<div class="line-block">
<div class="line">&nbsp;:</div>
<div class="line">Meshes describing the interfaces between regions of homogeneous</div>
</div>
<p>conductivity. These meshes generally represent:</p>
<ul class="simple">
<li>the inner skull surface</li>
<li>the outer skull surface</li>
<li>the outer scalp surface</li>
</ul>
<p>The recommended mesh size is approximately 600 to 800 points per
surface.</p>
<div class="line-block">
<div class="line">&nbsp;:</div>
<div class="line">Sources can be of two types: isolated or distributed. For distributed</div>
</div>
<p>sources, a source mesh describes their support. This is a detailed mesh
generally covering the whole cortex. The mesh size should not exceed 35
000 points. The source amplitude is represented as continuous, and
linear on each of the mesh triangles. The source orientation is modeled
as piecewise constant, normal to each of the mesh triangles.</p>
<div class="line-block">
<div class="line"><img alt="image3" src="_images/cortex.png" /></div>
<div class="line">Source mesh</div>
</div>
<p>Isolated sources are the superposition of current dipoles, each of which
is defined by its position and its moment.</p>
<p>&nbsp;: For EEG, the sensors are defined by the list of the x-y-z coordinates
of the electrode positions. The electrodes are considered punctual and
are called <em>patches</em>. The MEG sensor description is more complex, see
Appendix&nbsp;[chap:format].</p>
</div>
<div class="section" id="commands">
<h1>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h1>
<p>In the following, the binaries in , the options in , the inputs are in
<strong>black</strong> and the outputs in .</p>
<div class="section" id="head-matrix-assembly">
<span id="command-assemble-headmat"></span><h2>Head Matrix assembly <img class="math" src="_images/math/da985019c5b54f24658995a8ec24f1f9ba49d05c.png" alt="\mathbf{HeadMat}"/>:<a class="headerlink" href="#head-matrix-assembly" title="Permalink to this headline">¶</a></h2>
<p>Inputs:</p>
<ul class="simple">
<li>subject.geom: geometry description file (see Appendix&nbsp;[sec:geom])</li>
<li>subject.cond: conductivity description file (see Appendix&nbsp;[sec:cond])</li>
</ul>
<p>Output:</p>
<ul class="simple">
<li>: binary file containing the matrix <img class="math" src="_images/math/da985019c5b54f24658995a8ec24f1f9ba49d05c.png" alt="\mathbf{HeadMat}"/>
(symmetric format).</li>
</ul>
<p>The symmetric format only stores the lower half of a matrix.</p>
<p>Note: the abbreviated option names or can be used instead of .</p>
</div>
<div class="section" id="source-matrix-assembly">
<span id="command-assemble-sourcemat"></span><h2>Source matrix assembly <img class="math" src="_images/math/6d87db81b951c06a05650595ddb8083ef3c5846b.png" alt="\mathbf{Source}"/>:<a class="headerlink" href="#source-matrix-assembly" title="Permalink to this headline">¶</a></h2>
<p>Inputs:</p>
<ul>
<li><p class="first">subject.geom: geometry description file (see Appendix&nbsp;[sec:geom])</p>
</li>
<li><p class="first">subject.cond: conductivity description file (see Appendix&nbsp;[sec:cond])</p>
</li>
<li><p class="first">the source(s):</p>
<dl class="docutils">
<dt>[dipolar case</dt>
<dd><p class="first last">] dipolePosition.dip: dipole description file (list of
coordinates and orientations) (see Appendix&nbsp;[sec:dipoles])</p>
</dd>
<dt>[case of distributed sources</dt>
<dd><p class="first last">] sourcemesh: source mesh (accepted formats: *.tri or *.mesh of
BrainVisa, or *.vtk)</p>
</dd>
</dl>
</li>
</ul>
<p>Output:</p>
<ul class="simple">
<li>: binary file containing <img class="math" src="_images/math/f05ddf12e9b047d77ff814a147e21d01110031bd.png" alt="\mathbf{SourceMat}"/></li>
</ul>
<div class="line-block">
<div class="line">For dipolar sources:</div>
<div class="line-block">
<div class="line">Note: the abbreviated option names or can be used instead of .</div>
</div>
</div>
<div class="line-block">
<div class="line">For distributed sources:</div>
<div class="line-block">
<div class="line">Note: the abbreviated option names or can be used instead of .</div>
</div>
</div>
</div>
<div class="section" id="matrix-inversion">
<span id="command-invert-headmat"></span><h2><img class="math" src="_images/math/da985019c5b54f24658995a8ec24f1f9ba49d05c.png" alt="\mathbf{HeadMat}"/> matrix inversion:<a class="headerlink" href="#matrix-inversion" title="Permalink to this headline">¶</a></h2>
<p>Inputs:</p>
<ul class="simple">
<li>HeadMat.bin: binary file containing matrix <img class="math" src="_images/math/da985019c5b54f24658995a8ec24f1f9ba49d05c.png" alt="\mathbf{HeadMat}"/>
(symmetric format)</li>
</ul>
<p>Output:</p>
<ul class="simple">
<li>: binary file containing matrix <img class="math" src="_images/math/3f09d251165835d9551ebe3318deaa1e1da7a14c.png" alt="\mathbf{HeadMat}^{-1}"/>
(symmetric format)</li>
</ul>
</div>
<div class="section" id="linear-transformation-from-x-to-the-sensor-potential">
<h2>Linear transformation from X to the sensor potential:<a class="headerlink" href="#linear-transformation-from-x-to-the-sensor-potential" title="Permalink to this headline">¶</a></h2>
<p>[sect: command assemble sensors]</p>
<div class="line-block">
<div class="line"><a href="#id1"><span class="problematic" id="id2">**</span></a><a href="#id3"><span class="problematic" id="id4">**</span></a>:</div>
</div>
<p>A linear interpolation is computed which relates X to the electrode
potential through the linear transformation:</p>
<div class="math">
<p><img src="_images/math/19f98d6f8a624b13cb61a995621937016a644aba.png" alt="\mathbf{V_{electrode}} = \mathbf{Head2EEG} . \mathbf{X}

where:"/></p>
</div><ul class="simple">
<li><img class="math" src="_images/math/f26b62cc8bb0a863623665dd64d0b1b005b3c366.png" alt="\mathbf{V_{electrode}}"/> is the column-vector of potential
values at the sensors (output of EEG forward problem),</li>
<li><img class="math" src="_images/math/5ecbbc0083da71f2cbc69e1377535094685b108a.png" alt="\mathbf{X}"/> is the column-vector containing the values of the
potential and the normal current on all the surface of the model,</li>
<li><img class="math" src="_images/math/30691074526edea8efa59d7a62e27b622f72ff46.png" alt="\mathbf{Head2EEGMat}"/> is the linear transformation to be
computed.</li>
</ul>
<p>Inputs:</p>
<ul class="simple">
<li>subject.geom: geometry description file (see Appendix&nbsp;[sec:geom])</li>
<li>subject.cond: conductivity description file (see Appendix&nbsp;[sec:cond])</li>
<li>patchespositions.txt: file containing the positions of the EEG
electrodes (see Appendix&nbsp;[sec:sensors])</li>
</ul>
<p>Sortie:</p>
<ul class="simple">
<li>: file containing the matrix <img class="math" src="_images/math/30691074526edea8efa59d7a62e27b622f72ff46.png" alt="\mathbf{Head2EEGMat}"/> (sparse
format)</li>
</ul>
<p>The sparse format allows to store efficiently matrices containing a
small proportion of non-zero values.</p>
<p>Note: the abbreviated option names or can be used instead of .</p>
<div class="line-block">
<div class="line"><a href="#id5"><span class="problematic" id="id6">**</span></a><a href="#id7"><span class="problematic" id="id8">**</span></a>:</div>
<div class="line">In the case of MEG there are more matrices to assemble, as explained</div>
</div>
<p>in section&nbsp;[]. The magnetic field is related both to the sources
directly, as well as to the electric potential, according to:</p>
<div class="math">
<p><img src="_images/math/a99b19142c7114e2276edeb7bf5516be1b53e890.png" alt="\mathbf{M_{sensor}} = \mathbf{Source2MEGMat} . \mathbf{S} + \mathbf{Head2MEGMat}.\mathbf{X}"/></p>
</div><div class="line-block">
<div class="line">:</div>
<div class="line">Inputs:</div>
</div>
<ul class="simple">
<li>subject.geom: geometry description file (see Appendix&nbsp;[sec:geom])</li>
<li>subject.cond: conductivity description file (see Appendix&nbsp;[sec:cond])</li>
<li>sensorpositions.txt: positions and orientations of MEG sensors (see
Appendix&nbsp;[sec:sensors])</li>
</ul>
<p>Output:</p>
<ul class="simple">
<li>: binary file containing <img class="math" src="_images/math/c3d29024d42a0d6bf69222b3d758a968bc259a38.png" alt="\mathbf{Head2MEGMat}"/></li>
</ul>
<p>Note: the abbreviated option names or can be used instead of .</p>
<div class="line-block">
<div class="line">:</div>
<div class="line">Inputs:</div>
</div>
<ul>
<li><p class="first">the source(s):</p>
<dl class="docutils">
<dt>[dipolar sources</dt>
<dd><p class="first last">] dipolePosition.dip: dipole description file (list of
coordinates and orientations) (see Appendix&nbsp;[sec:dipoles])</p>
</dd>
<dt>[distributed sources</dt>
<dd><p class="first last">] sourcemesh: source mesh (accepted formats: *.tri or *.mesh of
BrainVisa, or *.vtk)</p>
</dd>
</dl>
</li>
<li><p class="first">sensorpositions.txt: positions and orientations of MEG sensors (see
Appendix&nbsp;[sec:sensors])</p>
</li>
</ul>
<p>Output:</p>
<ul>
<li><div class="first line-block">
<div class="line">: binary file containing <img class="math" src="_images/math/6ebdca34f986e0ad8d05a66f7d548a2bf7702460.png" alt="\mathbf{DipSource2MEGMat}"/></div>
</div>
</li>
<li><p class="first">or : binary file containing <img class="math" src="_images/math/ab6ff0c5cbb5be99b0870cb9828cd9e5093c4e8e.png" alt="\mathbf{SurfSource2MEGMat}"/></p>
</li>
</ul>
<div class="line-block">
<div class="line">For dipolar sources:</div>
<div class="line-block">
<div class="line">Note: the abbreviated option names or can be used instead of .</div>
</div>
</div>
<div class="line-block">
<div class="line">For distributed sources:</div>
<div class="line-block">
<div class="line">Note: the abbreviated option names or can be used instead of .</div>
</div>
</div>
</div>
<div class="section" id="gain-matrix-computation">
<h2>Gain matrix computation:<a class="headerlink" href="#gain-matrix-computation" title="Permalink to this headline">¶</a></h2>
<p>[sect: command gain]</p>
<p>The gain matrix represents the linear transformation relating the
activation of sources, at <strong>predefined positions and orientations</strong> to
the values of the fields of interest (electric potential or magnetic
field) at predefined sensor positions (and orientations for MEG).</p>
<div class="line-block">
<div class="line"><a href="#id9"><span class="problematic" id="id10">**</span></a><a href="#id11"><span class="problematic" id="id12">**</span></a>:</div>
<div class="line">Inputs:</div>
</div>
<ul class="simple">
<li>HeadMatInv.bin: binary file containing <img class="math" src="_images/math/3f09d251165835d9551ebe3318deaa1e1da7a14c.png" alt="\mathbf{HeadMat}^{-1}"/>
(symmetric format)</li>
<li>SourceMat.bin: binary file containing either
<img class="math" src="_images/math/88a6bacea6c575a365df328cdbcb117ef5692c5b.png" alt="\mathbf{SurfSourceMat}"/> or <img class="math" src="_images/math/4dc2ab53c1a328f269ccdf65da038fcc33244872.png" alt="\mathbf{DipSourceMat}"/></li>
<li>Head2EEGMat.bin: binary file containing <img class="math" src="_images/math/30691074526edea8efa59d7a62e27b622f72ff46.png" alt="\mathbf{Head2EEGMat}"/>
(sparse format)</li>
</ul>
<p>Output:</p>
<ul class="simple">
<li>: binary file contining the gain matrix</li>
</ul>
<div class="line-block">
<div class="line"><a href="#id13"><span class="problematic" id="id14">**</span></a><a href="#id15"><span class="problematic" id="id16">**</span></a>:</div>
<div class="line">Inputs:</div>
</div>
<ul class="simple">
<li>HeadMatInv.bin: binary file containing <img class="math" src="_images/math/3f09d251165835d9551ebe3318deaa1e1da7a14c.png" alt="\mathbf{HeadMat}^{-1}"/>
(symmetric format)</li>
<li>SourceMat.bin: binary file containing either
<img class="math" src="_images/math/88a6bacea6c575a365df328cdbcb117ef5692c5b.png" alt="\mathbf{SurfSourceMat}"/> or <img class="math" src="_images/math/4dc2ab53c1a328f269ccdf65da038fcc33244872.png" alt="\mathbf{DipSourceMat}"/></li>
<li>Head2MEGMat.bin: binary file containing <img class="math" src="_images/math/c3d29024d42a0d6bf69222b3d758a968bc259a38.png" alt="\mathbf{Head2MEGMat}"/></li>
<li>Source2MEGMat.bin:binary file containing either
<img class="math" src="_images/math/6ebdca34f986e0ad8d05a66f7d548a2bf7702460.png" alt="\mathbf{DipSource2MEGMat}"/> or
<img class="math" src="_images/math/ab6ff0c5cbb5be99b0870cb9828cd9e5093c4e8e.png" alt="\mathbf{SurfSource2MEGMat}"/></li>
</ul>
<p>Output:</p>
<ul class="simple">
<li>: binary file containing the gain matrix</li>
</ul>
</div>
<div class="section" id="the-forward-problem">
<h2>The forward problem:<a class="headerlink" href="#the-forward-problem" title="Permalink to this headline">¶</a></h2>
<p>[sect: command direct]</p>
<p>Once the gain matrix is computed, the forward problem amounts to
defining the source activation, and applying the gain matrix to this
activation.</p>
<p>Inputs:</p>
<ul class="simple">
<li>GainMat.bin: binary file containing EEG or MEG gain matrix</li>
<li>activationSources.txt: file describing the source activation (see
Appendix&nbsp;[sec:activ])</li>
<li>noise: noise (zero, or positive real number)</li>
</ul>
<p>Output:</p>
<ul class="simple">
<li>: file containing the simulated sensor data.</li>
</ul>
</div>
</div>
<div class="section" id="data-format">
<h1>Data format<a class="headerlink" href="#data-format" title="Permalink to this headline">¶</a></h1>
<p>[chap:format]</p>
<div class="section" id="geometry-description-file">
<h2>Geometry description file<a class="headerlink" href="#geometry-description-file" title="Permalink to this headline">¶</a></h2>
<p>[sec:geom] The geometry description file provides</p>
<ul class="simple">
<li>the number of the meshed surfaces separating the different domains,</li>
<li>the names of the files corresponding to these surfaces,</li>
<li>the number of domains of homogeneous conductivity,</li>
<li>the positions of the domains with respect to the interfaces (inside or
outside)</li>
</ul>
<p>The geometry description file should have as extension: *.geom</p>
<p><img alt="image4" src="_images/geom2.png" /></p>
<p>“Meshes paths” can be</p>
<ul class="simple">
<li>global (as on drawing)</li>
<li>relative to where the command line is executed</li>
</ul>
<p>For the meshes, the following formats are allowed&nbsp;:</p>
<ul class="simple">
<li>*.tri&nbsp;: TRI format corresponding to early BrainVisa. Also handled by
Anatomist.</li>
<li>*.mesh&nbsp;: MESH format corresponding to BrainVisa versions 3.0.2 and
later. Also handled by Anatomist.</li>
<li>*.gii&nbsp;: Gifti mesh format.</li>
<li>*.off&nbsp;: ASCII mesh format.</li>
<li>*.bnd&nbsp;: ASCII mesh format.</li>
<li>*.vtk&nbsp;: VTK mesh format.</li>
</ul>
</div>
<div class="section" id="conductivity-description-file">
<h2>Conductivity description file<a class="headerlink" href="#conductivity-description-file" title="Permalink to this headline">¶</a></h2>
<p>[sec:cond]</p>
<div class="line-block">
<div class="line">The conductivity description file defines the conductivity values</div>
</div>
<p>corresponding to each domain listed in the Geometry Description File
(section&nbsp;[sec:geom]).
| The file extension should be: *.cond .</p>
<p><img alt="image5" src="_images/cond.png" /></p>
</div>
<div class="section" id="source-description">
<h2>Source description<a class="headerlink" href="#source-description" title="Permalink to this headline">¶</a></h2>
<p>Sources are defined by their geometry (position and orientation) and
their magnitude. OpenMEEG handles two types of source models: isolated
dipoles, or distributed dipoles: these two models differ in their
geometry description.</p>
<div class="section" id="source-position-and-orientation">
<h3>Source position and orientation<a class="headerlink" href="#source-position-and-orientation" title="Permalink to this headline">¶</a></h3>
<p>[sec:dipoles]</p>
<div class="section" id="isolated-dipoles">
<h4>Isolated dipoles<a class="headerlink" href="#isolated-dipoles" title="Permalink to this headline">¶</a></h4>
<p>Isolated dipoles are represented by a text file (extension *.dip or
*.txt), in which each line defines a dipole position and orientation,
encoded in 6 real values:</p>
<ul class="simple">
<li>three values encoding the Cartesian coordinate for the position,</li>
<li>three values encoding the orientation of the dipole (supposed
unitary).</li>
</ul>
<p>The following example shows a file describing 5 isolated dipoles:</p>
<p><img alt="image6" src="_images/dipolePositions_en.png" /></p>
<p>The referential of the coordinates should be the same as for the meshes
(the MR coordinates in general).</p>
</div>
<div class="section" id="distributed-dipoles">
<h4>Distributed dipoles<a class="headerlink" href="#distributed-dipoles" title="Permalink to this headline">¶</a></h4>
<p>Distributed dipoles are supported on a mesh, whose format must be
*.mesh, *.tri, *.vtk, *.bnd, *.off, or *.gii.</p>
</div>
</div>
<div class="section" id="source-activation">
<h3>Source activation<a class="headerlink" href="#source-activation" title="Permalink to this headline">¶</a></h3>
<p>[sec:activ]</p>
<p>Source activation files are text files, in which each line corresponds
to a source, and each column to a time sample.</p>
<ul class="simple">
<li>for isolated dipoles, the nth line corresponds to the amplitude of
the nth dipole (with its fixed orientation)</li>
<li>for distributed dipoles, the nth line correspond to the amplitude of
the nth vertex in the source mesh.</li>
</ul>
<p>Example for isolated dipoles:</p>
<p><img alt="image7" src="_images/dipActiv.png" /></p>
</div>
</div>
<div class="section" id="sensor-definition">
<h2>Sensor definition<a class="headerlink" href="#sensor-definition" title="Permalink to this headline">¶</a></h2>
<p>[sec:sensors]</p>
<p>The sensor definition is provided in a text file, in which each line
provides the position of the sensor, and additional information such as
its orientation or its name. More precisely, there are 5 options for
defining sensors:</p>
<ol class="arabic simple">
<li>1 line per sensor and 3 columns (typically for EEG sensors or MEG
sensors without orientation) :<ul>
<li>the 1st, 2nd and 3rd columns are respectively position coordinates
x, y, z of sensor</li>
</ul>
</li>
<li>1 line per sensor and 4 columns (typically for EEG sensors or MEG
sensors without orientation) :<ul>
<li>the 1st column is sensors names</li>
<li>the 2nd, 3rd and 4th are respectively position coordinates x, y, z
of sensor</li>
</ul>
</li>
<li>1 line per sensor and 6 columns (typically for MEG sensors) :<ul>
<li>the 1st, 2nd and 3rd are respectively position coordinates x, y, z
of sensor</li>
<li>the 4th, 5th and 6th are coordinates of vector orientation</li>
</ul>
</li>
<li>1 line per sensor and 7 columns (typically for MEG sensors) :<ul>
<li>the 1st column is sensors names</li>
<li>the 2nd, 3rd and 4th are respectively position coordinates x, y, z
of sensor</li>
<li>the 5th, 6th and 7th are coordinates of vector orientation</li>
</ul>
</li>
<li>1 line per integration point for each sensor and 8 columns (typically
for MEG realistic sensors with coils, or gradiometers) :<ul>
<li>the 1st column is sensors names</li>
<li>the 2nd, 3rd and 4th are respectively position coordinates x, y, z
of sensor</li>
<li>the 5th, 6th and 7th are coordinates of vector orientation</li>
<li>the 8th is the weight to apply for numerical integration (related
to sensor name)</li>
</ul>
</li>
</ol>
<p>An example of MEG sensor description:</p>
<p><img alt="image8" src="_images/sensors-grad.png" /></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2013, OpenMEEG Developers.
      Last updated on Nov 14, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>